function MessageManager(e,t){var n=$("#CITMessageContainer");var r=this;jQuery.sap.require("sap.ui.core.IconPool");var i={Messages:[]};var s=new sap.ui.model.json.JSONModel;s.setData(i);var o={Status:{color:"#6599FF",status:"Info",statusLevel:4}};var u=new sap.ui.model.json.JSONModel;u.setData(o);if(n!=null){return}var a=function(e){function s(n){var i=n.getParameter("message");r.deleteMessage(i,e,t)}$("body").append("<div id = 'CITMessageContainer'></div>");$("#CITMessageContainer").append("<div id ='CITMessageDiv'></div>");$("#CITMessageContainer").hide();jQuery.sap.require("sap.ui.ux3.Notifier");jQuery.sap.require("sap.ui.ux3.NotificationBar");jQuery.sap.require("sap.ui.core.Message");var n=new sap.ui.ux3.Notifier("messageList",{title:"Messages Received"});var i=new sap.ui.ux3.NotificationBar;n.setModel(e);n.bindAggregation("messages","/Messages",new sap.ui.core.Message({icon:"{icon}",level:"{notBarLevel}",timestamp:"{timestamp}",text:"{text}"}));n.attachMessageSelected(s);i.addNotifier(n);i.placeAt("CITMessageDiv")};var f=function(e){$("body").append("<div id = 'CITMessageContainer'></div>");$("#CITMessageContainer").append("<div id ='CITMessageDiv'></div>");$("#CITMessageContainer").append("<div id ='CITMessageCount'></div>");$("#CITMessageContainer").hide();var n=new sap.m.List("messageList");var i=(new sap.m.Dialog("messagePop",{content:n,showCloseButton:false,title:"Message",modal:true,beginButton:new sap.m.Button({text:"Dismiss All",press:function(){i.close();r.deleteAllMessages()}}),endButton:new sap.m.Button({text:"Close",press:function(){i.close()}})})).addStyleClass("messagePopup");var s=(new sap.ui.core.Icon("mIcon",{src:sap.ui.core.IconPool.getIconURI("discussion"),color:"{/Status/color}",press:function(){if(n.getModel().getData().Messages.length!==0){i.open()}}})).addStyleClass("mobileMessageIcon");s.placeAt("CITMessageDiv");s.setModel(u);var o=new sap.m.CustomListItem({content:[(new sap.m.HBox({items:[(new sap.ui.core.Icon({src:"{icon}",width:"25px",color:"{color}"})).addStyleClass("icon"),(new sap.m.VBox({items:[(new sap.m.Text({text:"{title}"})).addStyleClass("messageTitle"),(new sap.m.Text({text:"{text}"})).addStyleClass("messageBody"),(new sap.m.Text({text:"{timestamp}"})).addStyleClass("messageTimestamp")]})).addStyleClass("mainContent"),(new sap.ui.core.Icon({src:sap.ui.core.IconPool.getIconURI("delete"),width:"25px",press:function(n){var i=this.getParent();r.deleteMessage(i,e,t);r.updateCounter()}})).addStyleClass("delIcon")]})).addStyleClass("messageTemplateBox")]});n.setModel(e);n.bindItems("/Messages",o)};if(t){f(s);MessageManager.prototype.iconPosition=function(e){switch(e){case"topright":$("#CITMessageContainer").css({top:"55px",right:"2%",left:"95%"});break;case"topleft":$("#CITMessageContainer").css({top:"55px",left:"2%",right:"95%"});break;case"middleright":$("#CITMessageContainer").css({top:"48%",right:"2%",left:"95%"});break;case"middleleft":$("#CITMessageContainer").css({top:"48%",left:"2%",right:"95%"});break;case"bottomleft":$("#CITMessageContainer").css({top:"90%",left:"2%",right:"95%"});break;case"bottomright":$("#CITMessageContainer").css({top:"90%",right:"2%",left:"95%"});break;default:$("#CITMessageContainer").css({top:"55px",right:"2%",left:"95%"});break}};MessageManager.prototype.setIcon=function(e){sap.ui.getCore().byId("messageIcon").setSrc(e)};this.iconPosition()}else{a(s)}}MessageManager.prototype.addMessage=function(e,t,n,r){var i=sap.ui.getCore().byId("messageList").getModel();var s=i.getData().Messages;var o=function(){var e=new Date;var t=function(e){return e>=0&&e<10?"0"+e:e+""};var n=[[t(e.getDate()),t(e.getMonth()+1),e.getFullYear()].join("/"),[t(e.getHours()),t(e.getMinutes())].join(":"),e.getHours()>=12?"PM":"AM"].join(" ");return n};if(r===undefined||r===null){r=o()}var u="";var a="";var f="";jQuery.sap.require("sap.ui.core.IconPool");switch(e){case"Error":a=sap.ui.core.MessageType.Error;u=sap.ui.core.IconPool.getIconURI("error");f="#FF0000";this.setWorseStatus("Error",1,"#FF0000");break;case"Warning":a="Warning";u=sap.ui.core.IconPool.getIconURI("warning");f="#FF9900";this.setWorseStatus("Warning",2,"#FF9900");break;case"Success":a=sap.ui.core.MessageType.Success;u=sap.ui.core.IconPool.getIconURI("accept");f="#92CD00";this.setWorseStatus("Success",3,"#92CD00");break;case"Info":a=sap.ui.core.MessageType.Information;u=sap.ui.core.IconPool.getIconURI("post");f="#6599FF";this.setWorseStatus("Info",4,"#6599FF");break}var l={icon:u,color:f,level:e,notBarLevel:a,title:t,text:n,timestamp:r};s.push(l);messageObject={Messages:s};i.setData(messageObject);sap.ui.getCore().setModel(i,"MessageModel");this.updateCounter()};MessageManager.prototype.deleteMessage=function(e,t,n){var r=t.getData();if(!n){var i=(new sap.m.Dialog({content:new sap.m.Text({text:"This will delete the selected message are you sure ?"}),showCloseButton:false,title:"Delete Confirmation",modal:true,beginButton:new sap.m.Button({text:"Confirm",press:function(){i.close();e.destroy();r.Messages.splice(e.getBindingContext().getPath(),1);if(r.Messages.length===0){that.updateCounter();that.hideControl()}}}),endButton:new sap.m.Button({text:"Close",press:function(){i.close()}})})).open()}else{r.Messages.splice(e.getBindingContext().getPath(),1);if(r.Messages.length===0){sap.ui.getCore().byId("messagePop").close();that.hideControl()}}t.setData(r);return};MessageManager.prototype.deleteAllMessages=function(){var e=sap.ui.getCore().getModel("MessageModel");messageObject={Messages:[]};e.setData(messageObject);sap.ui.getCore().setModel(e,"MessageModel");this.updateCounter()};MessageManager.prototype.showControl=function(){$("#CITMessageContainer").show()};MessageManager.prototype.hideControl=function(){$("#CITMessageContainer").hide()};MessageManager.prototype.getWorseStatus=function(){var e=sap.ui.getCore().byId("mIcon").getModel();return e.getData().Status};MessageManager.prototype.setWorseStatus=function(e,t,n){var r=sap.ui.getCore().byId("mIcon").getModel();var i=r.getData().Status.statusLevel;if(t<i){var s={Status:{status:e,statusLevel:t,color:n}};r.setData(s)}};MessageManager.prototype.updateCounter=function(){var e=sap.ui.getCore().byId("messageList").getModel().getData().Messages.length;$("#CITMessageCount").html(e.toString())};MessageManager.prototype.hideCounter=function(){$("#CITMessageCount").hide()};MessageManager.prototype.showCounter=function(){$("#CITMessageCount").show()}